apply plugin: 'java'

dependencies {
    compile project('customers')
    compile project('accounts')
    compile project('transactions')
}

allprojects {
	repositories {
		mavenCentral()
	}

	configurations {
		providedRuntime
	}

    apply plugin: 'java'
	apply plugin: 'org.springframework.boot'

	ext {
		springCloudVersion = 'Dalston.SR1'
	}

	dependencies {
		compile('org.springframework.cloud:spring-cloud-starter-eureka')
		compile('org.springframework.boot:spring-boot-starter-data-mongodb')
		compile('org.springframework.boot:spring-boot-starter-web')
		compile("org.axonframework:axon-core:${axonVersion}")
		compile("org.axonframework:axon-mongo:${axonVersion}")
		testCompile("org.axonframework:axon-test:${axonVersion}")
		providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')
		testCompile('org.springframework.boot:spring-boot-starter-test')
	}

	dependencyManagement {
		imports {
			mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
		}
	}
}

buildscript {
    ext {
        springBootVersion = '1.5.4.RELEASE'
        axonVersion = '3.1.2'
    }
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    }
}
